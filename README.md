# c-project-skeleton-v2

A modern, well-organized C project skeleton that supports Linux and macOS. This project uses strict compiler flags, integrates a variety of static analysis and sanitization tools, and is configured for both debug and release builds. It’s designed to help you write high-quality, maintainable C code.

## Directory Structure

```bash
c-project-skeleton-v2/
├── bin // Final executables (generated by the build process)
├── build // Intermediate build files (object files, etc.)
├── c-project-skeleton-v2.code-workspace // VSCode workspace configuration
├── docs // Documentation
│   └── DEVELOPMENT_WORKFLOW.md // Detailed development workflow guide
├── include // Header files
├── lib // Third-party libraries
├── Makefile // Primary build script
├── README.md // This file
├── scripts // Helper scripts for setup and maintenance
├── src // C source files
└── tests // Unit/integration tests
```

## Getting Started

### Prerequisites

Ensure you have the following installed:

- A C compiler (gcc or clang)
- GNU Make
- clang-format and clang-tidy
- cppcheck, flawfinder, Splint
- Valgrind (for Linux)
- Check (for unit testing)
- Other analysis tools as needed (e.g., SonarQube, Facebook Infer)

### Build and Run

- **Debug Build:**
  Compile with debug flags (no optimization, debug symbols included):

  ```
  make debug
  ```

  The executable will be located in the bin/ directory.

- **Release Build:**
  Compile with optimization:

  ```
  make release
  ```

- **Run the Executable:**
  After building, run:

  ```
  ./bin/main
  ```

## Unit Testing with Check

This skeleton integrates the [Check](https://libcheck.github.io/check/) unit testing framework to help you write and run tests for your C code. The tests are located in the `tests/` directory.

- **Compile and Run Tests:**
  Simply run:

  ```
  make test
  ```

  This target compiles your test sources with the Check library and runs the resulting test runner executable.

- **Installation:**
  On Ubuntu, install Check with:

  ```
  sudo apt update && sudo apt install check
  ```

  On macOS (with Homebrew), install with:

  ```
  brew install check
  ```

## Code Formatting Rules

This project uses `clang-format` configured with Google's recommended formatting rules for C. Ensure your editor is set up to use clang-format for consistent code styling. You can run:

```
make format
```

to automatically format your code.

## Development Workflow

For detailed instructions on the development process—from writing code, running static analysis and sanitizers, to generating production builds—please refer to our [Development Workflow](docs/DEVELOPMENT_WORKFLOW.md).

## Static Analysis and Debugging Tools

Use the following Makefile targets to improve code quality and debug your application:

- **Format Code:**
  `make format`
- **Static Analysis:**
  - clang-tidy: `make clang-tidy`
  - cppcheck: `make cppcheck`
  - Flawfinder: `make flawfinder`
  - OWASP dependency-check: `make dependency-check`
  - Splint: `make splint`
- **Sanitizers:**
  - AddressSanitizer: `make asan`
  - LeakSanitizer: `make lsan`
  - ThreadSanitizer: `make tsan`
  - Undefined Behavior Sanitizer: `make ubsan`
- **Coverage and Profiling:**
  - LLVM Code Coverage: `make llvm-coverage`
  - Valgrind (memcheck, cachegrind, callgrind, massif): `make valgrind-memcheck`, etc.
- **SonarQube:**
  Run SonarQube analysis with: `make sonar-scanner` (ensure your SonarQube instance is running)
- **Debugger:**
  Launch the debugger (gdb or lldb) with: `make debugger`

## Contributing

Contributions are welcome! Please follow the coding standards defined by our strict compiler flags and formatting rules. For details on our development process, see the [Development Workflow](docs/DEVELOPMENT_WORKFLOW.md).

## License

This project is licensed under the [MIT License](LICENSE).
